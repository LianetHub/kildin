(()=>{"use strict";function e(e,t,l,o){void 0===t&&(t=400),void 0===o&&(o=!1),e.style.overflow="hidden",o&&(e.style.display="block");var a,n=window.getComputedStyle(e),i=parseFloat(n.getPropertyValue("height")),r=parseFloat(n.getPropertyValue("padding-top")),s=parseFloat(n.getPropertyValue("padding-bottom")),c=parseFloat(n.getPropertyValue("margin-top")),d=parseFloat(n.getPropertyValue("margin-bottom")),u=i/t,p=r/t,m=s/t,g=c/t,y=d/t;window.requestAnimationFrame((function n(v){void 0===a&&(a=v);var h=v-a;o?(e.style.height=u*h+"px",e.style.paddingTop=p*h+"px",e.style.paddingBottom=m*h+"px",e.style.marginTop=g*h+"px",e.style.marginBottom=y*h+"px"):(e.style.height=i-u*h+"px",e.style.paddingTop=r-p*h+"px",e.style.paddingBottom=s-m*h+"px",e.style.marginTop=c-g*h+"px",e.style.marginBottom=d-y*h+"px"),h>=t?(e.style.height="",e.style.paddingTop="",e.style.paddingBottom="",e.style.marginTop="",e.style.marginBottom="",e.style.overflow="",o||(e.style.display="none"),"function"==typeof l&&l()):window.requestAnimationFrame(n)}))}document.addEventListener("DOMContentLoaded",(()=>{function e(){const e=document.querySelectorAll(".navigation__item"),t=document.querySelector(".navigation__item:not(.active):not(:first-child)").getBoundingClientRect().width;let l=e.length*t,o=0;e.forEach(((a,n)=>{let i=n+1;a.classList.contains("active")&&(l=(e.length-i)*t,o=i*t)})),document.body.style.setProperty("--padding-wrapper-right",`${l}px`),document.body.style.setProperty("--padding-wrapper-left",`${o}px`)}function t(){a(),function(){const e=document.querySelectorAll("[data-spollers]");if(e.length>0){const t=Array.from(e).filter((function(e,t,l){return!e.dataset.spollers.split(",")[0]}));t.length>0&&o(t);const l=Array.from(e).filter((function(e,t,l){return e.dataset.spollers.split(",")[0]}));if(l.length>0){const e=[];l.forEach((t=>{const l={},o=t.dataset.spollers.split(",");l.value=o[0],l.type=o[1]?o[1].trim():"max",l.item=t,e.push(l)}));let t=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));t=t.filter((function(e,t,l){return l.indexOf(e)===t})),t.forEach((t=>{const l=t.split(","),a=l[1],n=l[2],i=window.matchMedia(l[0]),r=e.filter((function(e){if(e.value===a&&e.type===n)return!0}));i.addListener((function(){o(r,i)})),o(r,i)}))}function o(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),a(e),e.addEventListener("click",n)):(e.classList.remove("_init"),a(e,!1),e.removeEventListener("click",n))}))}function a(e,t=!0){const l=e.querySelectorAll("[data-spoller]");l.length>0&&l.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)}))}function n(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const l=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),o=l.closest("[data-spollers]"),a=!!o.hasAttribute("data-one-spoller");o.querySelectorAll("._slide").length||(a&&!l.classList.contains("_active")&&i(o),l.classList.toggle("_active"),l.nextElementSibling.slideToggle(300)),e.preventDefault()}}function i(e){const t=e.querySelector("[data-spoller]._active");t&&(t.classList.remove("_active"),t.nextElementSibling.slideUp(300))}}}(),document.querySelectorAll("select[multiple]").forEach((e=>{var t=e.querySelectorAll("option"),o=document.createElement("div");o.classList.add("selectMultiple");var a=document.createElement("div");a.classList.add("active");var n=document.createElement("ul"),i=e.dataset.placeholder;"category"==e.getAttribute("name")&&o.setAttribute("data-category-block",""),"subcategory"==e.getAttribute("name")&&o.setAttribute("data-subcategory-block","");var r=document.createElement("span");r.innerText=i,a.appendChild(r),t.forEach((e=>{let t=e.innerText;if(e.selected){let l=document.createElement("a");l.dataset.value=e.value,l.innerHTML="<em>"+t+"</em><i></i>",a.appendChild(l),r.classList.add("hide")}else{let l=document.createElement("li");l.dataset.value=e.value,l.innerHTML=t,e.hasAttribute("data-category")&&l.setAttribute("data-category",e.dataset.category),n.appendChild(l)}}));var s=document.createElement("div");s.classList.add("arrow"),a.appendChild(s),o.appendChild(a),o.appendChild(n),e.parentElement.append(o),r.appendChild(e),o.hasAttribute("data-subcategory-block")&&l()})),document.querySelectorAll(".selectMultiple ul").forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.closest("li");if(!t)return;let o=t.closest(".selectMultiple");if(!o.classList.contains("clicked")){o.classList.add("clicked"),t.previousElementSibling&&t.previousElementSibling.classList.add("beforeRemove"),t.nextElementSibling&&t.nextElementSibling.classList.add("afterRemove"),t.classList.add("remove");let e=document.createElement("a");e.dataset.value=t.dataset.value,e.innerHTML="<em>"+t.innerText+"</em><i></i>",e.classList.add("notShown"),o.querySelector("div").appendChild(e),o.querySelector("select").querySelector('option[value="'+t.dataset.value+'"]').setAttribute("selected","selected"),setTimeout((()=>{e.classList.add("shown"),o.querySelector("span").classList.add("hide")}),300),setTimeout((()=>{let e=window.getComputedStyle(t),a=e.height,n=e.padding;t.animate([{height:a,padding:n},{height:"0px",padding:"0px"}],{duration:300,easing:"ease-in-out"}).onfinish=()=>{t.previousElementSibling&&t.previousElementSibling.classList.remove("beforeRemove"),t.nextElementSibling&&t.nextElementSibling.classList.remove("afterRemove"),t.remove(),o.classList.remove("clicked"),l()}}),300)}}))})),document.querySelectorAll(".selectMultiple > div").forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.closest("a"),o=e.target.closest(".selectMultiple");if(!t)return;t.className="",t.classList.add("remove"),o.classList.add("open");let a=o.querySelector("select");a.querySelector('option[value="'+t.dataset.value+'"]').removeAttribute("selected"),t.classList.add("disappear"),setTimeout((()=>{let e=window.getComputedStyle(t),n=e.padding,i=e.width,r=e.height,s=t.animate([{width:i,height:r,padding:n},{width:"0px",height:"0px",padding:"0px"}],{duration:0,easing:"ease-in-out"}),c=document.createElement("li");c.dataset.value=t.dataset.value,c.innerText=t.querySelector("em").innerText,c.classList.add("show"),o.querySelector("ul").appendChild(c),setTimeout((()=>{a.selectedOptions.length||o.querySelector("span").classList.remove("hide"),c.className=""}),350),s.onfinish=()=>{t.remove(),l()}}),300)}))})),document.querySelectorAll(".selectMultiple > div .arrow, .selectMultiple > div span").forEach((e=>{e.addEventListener("click",(t=>{document.querySelectorAll(".selectMultiple.open").forEach((e=>{e!==t.target.closest(".selectMultiple")&&e.classList.remove("open")})),e.closest(".selectMultiple").classList.toggle("open")}))})),document.querySelectorAll(".popup__slider")&&document.querySelectorAll(".popup__slider").forEach((e=>{let t=e.querySelector(".popup__next"),l=e.querySelector(".popup__prev");new Swiper(e,{speed:800,slidesPerView:1,navigation:{nextEl:t,prevEl:l}})})),document.querySelectorAll(".article__slider")&&document.querySelectorAll(".article__slider").forEach((e=>{let t=e.querySelector(".article__slider-prev"),l=e.querySelector(".article__slider-next");new Swiper(e,{slidesPerView:1,navigation:{nextEl:l,prevEl:t}})})),"undefined"!=typeof Fancybox&&null!==Fancybox&&(Fancybox.bind("[data-fancybox]"),Fancybox.defaults.closeButton=!1,Fancybox.defaults.dragToClose=!1)}function l(){const e=document.querySelector(".selectMultiple[data-category-block]"),t=document.querySelector(".selectMultiple[data-subcategory-block]"),l=e.querySelector("div.active");document.querySelectorAll("[data-category]").forEach((e=>e.classList.add("hidden"))),l.querySelectorAll("a").length>0?(t.classList.remove("disabled"),t.removeAttribute("inert"),l.querySelectorAll("a").forEach((e=>{let t=e.getAttribute("data-value");document.querySelectorAll(`[data-category="${t}"]`).forEach((e=>e.classList.remove("hidden")))}))):(t.classList.add("disabled"),t.setAttribute("inert",""))}function o(){if(document.querySelector("#map")){document.querySelector("#map").innerHTML="";var e=new ymaps.Map("map",{center:[69.34898894941716,34.18545550000002],zoom:12,controls:[]});document.querySelectorAll(".maps__placemark")&&(document.querySelectorAll(".maps__placemark").forEach((t=>{let l=t.dataset.coords.split(","),o=t.dataset.modal;var a=new ymaps.Placemark(l,{},{iconLayout:"default#image",iconImageHref:globalConfig.ICON_IMAGE_HREF,modalId:o});e.geoObjects.add(a)})),e.geoObjects.events.add("click",(function(e){var t=e.get("target").options._options.modalId;Fancybox.show([{src:t}])})))}}async function a(){if(!document.querySelector(".maps__filters"))return void ymaps.ready(o);let e=new FormData(document.querySelector(".maps__filters")),t={};e.forEach((function(e,l){t.hasOwnProperty(l)?t[l].push(e):(t[l]=e,"object"!==l&&(t[l]=Array.from(t[l])))}));let l=JSON.stringify(t);console.log("json",l);try{let e=await fetch(globalConfig.RESPONSE_URL,{method:"POST",headers:{"X-CSRFToken":function(e){var t=null;if(document.cookie&&""!==document.cookie)for(var l=document.cookie.split(";"),o=0;o<l.length;o++){var a=jQuery.trim(l[o]);if(a.substring(0,e.length+1)===e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}("csrftoken"),Accept:"application/json","Content-Type":"application/json"},body:l});if(e.ok){let t=await e.json();console.log(t),function(e){let t=document.querySelector(".maps__placemarks"),l=document.querySelector(".maps__modals");t.innerHTML="",l.innerHTML="";let{requests:o}=e;o.forEach((e=>{let{id:o,coordinates:a,req_popup:n}=e;l.innerHTML+=n;let i=document.createElement("div");i.classList.add("maps__placemark"),i.setAttribute("data-coords",a),i.setAttribute("data-modal",`#modal-${o}`),l.querySelectorAll(".popup__slider")&&l.querySelectorAll(".popup__slider").forEach((e=>{let t=e.querySelector(".popup__next"),l=e.querySelector(".popup__prev");new Swiper(e,{speed:800,slidesPerView:1,navigation:{nextEl:t,prevEl:l}})})),t.appendChild(i)}))}(t),ymaps.ready(o)}}catch(e){console.log(e)}}barba.init({preventRunning:!0,prefetchIgnore:!0,transitions:[{name:"base",async leave(t){window.innerWidth<767&&barba.go(t.trigger.href),await function(t){let l=t.trigger.closest(".navigation__item");return l||(l=document.querySelector(".navigation__item")),document.querySelector(".navigation").classList.add("pending"),gsap.to(l,{width:"100%",duration:.5,ease:"power2.in"}).then((()=>{!function(t){document.querySelectorAll(".navigation__item").forEach((e=>{e.classList.remove("active")})),t&&t.classList.add("active"),e()}(t.trigger.closest(".navigation__item")),window.scrollTo({top:0})}))}(t),t.current.container.remove()},async enter(e){await function(){let e=document.querySelector(".navigation__item.active");return e||(e=document.querySelector(".navigation__item")),gsap.to(e,{width:"auto",duration:.5,ease:"power2.out"}).then((()=>{document.querySelector(".navigation").classList.remove("pending")}))}(e.next.container)},async afterEnter(){document.querySelectorAll("video").forEach((e=>{var t=e.play();void 0!==t&&t.then((e=>{})).catch((e=>{}))})),t()}}]}),e(),t(),window.addEventListener("resize",(()=>{e()})),document.addEventListener("click",(e=>{const t=e.target;t.closest(".icon-menu")&&(document.querySelector(".navigation").classList.toggle("open"),function(e){const t=document.body;let l,o="lock";t.classList.contains(o)?(l=parseInt(document.body.dataset.position,10),t.dataset.position=l,t.style.top=-l+"px"):(l=window.scrollY,t.style.top="auto",window.scroll({top:l,left:0}),document.body.removeAttribute("data-position"));let a=t.classList.contains(o)?"0px":window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";t.style.paddingRight=a,t.classList.toggle(o)}(),document.querySelector(".icon-menu").classList.toggle("active")),t.classList.contains("maps__btn")&&(e.preventDefault(),a()),!t.closest(".selectMultiple")&&document.querySelector(".selectMultiple.open")&&document.querySelector(".selectMultiple.open").classList.remove("open")})),document.addEventListener("input",(e=>{"object"==e.target.getAttribute("name")&&(e.target.value>0?document.querySelectorAll(".selectMultiple").forEach((e=>{e.classList.add("disabled"),e.setAttribute("inert","")})):(document.querySelectorAll(".selectMultiple").forEach((e=>{e.classList.remove("disabled"),e.removeAttribute("inert")})),l()))}))})),HTMLElement.prototype.slideToggle=function(t,l){0===this.clientHeight?e(this,t,l,!0):e(this,t,l)},HTMLElement.prototype.slideUp=function(t,l){e(this,t,l)},HTMLElement.prototype.slideDown=function(t,l){e(this,t,l,!0)}})();