(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{function e(){const e=document.querySelectorAll(".navigation__item"),t=document.querySelector(".navigation__item:not(.active):not(:first-child)").getBoundingClientRect().width;let i=e.length*t,n=0;e.forEach(((a,o)=>{let l=o+1;a.classList.contains("active")&&(i=(e.length-l)*t,n=l*t)})),document.body.style.setProperty("--padding-wrapper-right",`${i}px`),document.body.style.setProperty("--padding-wrapper-left",`${n}px`)}function t(){ymaps.ready(i),document.querySelectorAll(".popup__slider")&&document.querySelectorAll(".popup__slider").forEach((e=>{let t=e.querySelector(".popup__next"),i=e.querySelector(".popup__prev");new Swiper(e,{speed:800,slidesPerView:1,navigation:{nextEl:t,prevEl:i}})})),"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind("[data-fancybox]",{dragToClose:!1,closeButton:!1}),document.querySelectorAll("select[multiple]").forEach((e=>{var t=e.querySelectorAll("option"),i=document.createElement("div");i.classList.add("selectMultiple");var n=document.createElement("div");n.classList.add("active");var a=document.createElement("ul"),o=e.dataset.placeholder,l=document.createElement("span");l.innerText=o,n.appendChild(l),t.forEach((e=>{let t=e.innerText;if(e.selected){let i=document.createElement("a");i.dataset.value=e.value,i.innerHTML="<em>"+t+"</em><i></i>",n.appendChild(i),l.classList.add("hide")}else{let i=document.createElement("li");i.dataset.value=e.value,i.innerHTML=t,a.appendChild(i)}}));var s=document.createElement("div");s.classList.add("arrow"),n.appendChild(s),i.appendChild(n),i.appendChild(a),e.parentElement.append(i),l.appendChild(e)})),document.querySelectorAll(".selectMultiple ul").forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.closest("li");if(!t)return;let i=t.closest(".selectMultiple");if(!i.classList.contains("clicked")){i.classList.add("clicked"),t.previousElementSibling&&t.previousElementSibling.classList.add("beforeRemove"),t.nextElementSibling&&t.nextElementSibling.classList.add("afterRemove"),t.classList.add("remove");let e=document.createElement("a");e.dataset.value=t.dataset.value,e.innerHTML="<em>"+t.innerText+"</em><i></i>",e.classList.add("notShown"),i.querySelector("div").appendChild(e),i.querySelector("select").querySelector('option[value="'+t.dataset.value+'"]').setAttribute("selected","selected"),setTimeout((()=>{e.classList.add("shown"),i.querySelector("span").classList.add("hide")}),300),setTimeout((()=>{let e=window.getComputedStyle(t),n=e.height,a=e.padding;t.animate([{height:n,padding:a},{height:"0px",padding:"0px"}],{duration:300,easing:"ease-in-out"}).onfinish=()=>{t.previousElementSibling&&t.previousElementSibling.classList.remove("beforeRemove"),t.nextElementSibling&&t.nextElementSibling.classList.remove("afterRemove"),t.remove(),i.classList.remove("clicked")}}),300)}}))})),document.querySelectorAll(".selectMultiple > div").forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.closest("a"),i=e.target.closest(".selectMultiple");if(!t)return;t.className="",t.classList.add("remove"),i.classList.add("open");let n=i.querySelector("select");n.querySelector('option[value="'+t.dataset.value+'"]').removeAttribute("selected"),t.classList.add("disappear"),setTimeout((()=>{let e=window.getComputedStyle(t),a=e.padding,o=e.width,l=e.height,s=t.animate([{width:o,height:l,padding:a},{width:"0px",height:"0px",padding:"0px"}],{duration:0,easing:"ease-in-out"}),c=document.createElement("li");c.dataset.value=t.dataset.value,c.innerText=t.querySelector("em").innerText,c.classList.add("show"),i.querySelector("ul").appendChild(c),setTimeout((()=>{n.selectedOptions.length||i.querySelector("span").classList.remove("hide"),c.className=""}),350),s.onfinish=()=>{t.remove()}}),300)}))})),document.querySelectorAll(".selectMultiple > div .arrow, .selectMultiple > div span").forEach((e=>{e.addEventListener("click",(t=>{e.closest(".selectMultiple").classList.toggle("open")}))}))}function i(){if(document.querySelector("#map")){var e=new ymaps.Map("map",{center:[69.34898894941716,34.18545550000002],zoom:12,controls:[]});e.behaviors.disable("scrollZoom");var t=new ymaps.Placemark([69.37817423278209,34.08108538281251],{},{iconLayout:"default#image",iconImageHref:"/kildin/img/icons/location.svg",modalId:"#modal"}),i=new ymaps.Placemark([69.32426958119503,34.20332282128056],{},{iconLayout:"default#image",iconImageHref:"/kildin/img/icons/location.svg",modalId:"#modal-2"});e.geoObjects.add(t),e.geoObjects.add(i),e.geoObjects.events.add("click",(function(e){var t=e.get("target").options._options.modalId;Fancybox.show([{src:t}])}))}}barba.init({preventRunning:!0,prefetchIgnore:!0,transitions:[{name:"base",async leave(t){window.innerWidth<767&&barba.go(t.trigger.href),await function(t){let i=t.trigger.closest(".navigation__item");return i||(i=document.querySelector(".navigation__item")),document.querySelector(".navigation").classList.add("pending"),gsap.to(i,{width:"100%",duration:.5,ease:"power2.in"}).then((()=>{!function(t){document.querySelectorAll(".navigation__item").forEach((e=>{e.classList.remove("active")})),t&&t.classList.add("active"),e()}(t.trigger.closest(".navigation__item"))}))}(t),t.current.container.remove()},async enter(e){await function(){let e=document.querySelector(".navigation__item.active");return e||(e=document.querySelector(".navigation__item")),gsap.to(e,{width:"auto",duration:.5,ease:"power2.out"}).then((()=>{document.querySelector(".navigation").classList.remove("pending")}))}(e.next.container)},async afterEnter(){document.querySelectorAll("video").forEach((e=>{var t=e.play();void 0!==t&&t.then((e=>{})).catch((e=>{}))})),t()}}]}),e(),t(),window.addEventListener("resize",(()=>{e()})),document.addEventListener("click",(e=>{e.target.closest(".icon-menu")&&(document.querySelector(".navigation").classList.toggle("open"),function(e){const t=document.body;let i,n="lock";t.classList.contains(n)?(i=parseInt(document.body.dataset.position,10),t.dataset.position=i,t.style.top=-i+"px"):(i=window.scrollY,t.style.top="auto",window.scroll({top:i,left:0}),document.body.removeAttribute("data-position"));let a=t.classList.contains(n)?"0px":window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";t.style.paddingRight=a,t.classList.toggle(n)}(),document.querySelector(".icon-menu").classList.toggle("active"))}))}))})();