(()=>{"use strict";document.addEventListener("DOMContentLoaded",(()=>{function e(){const e=document.querySelectorAll(".navigation__item"),t=document.querySelector(".navigation__item:not(.active):not(:first-child)").getBoundingClientRect().width;let o=e.length*t,n=0;e.forEach(((i,r)=>{let c=r+1;i.classList.contains("active")&&(o=(e.length-c)*t,n=c*t)})),document.body.style.setProperty("--padding-wrapper-right",`${o}px`),document.body.style.setProperty("--padding-wrapper-left",`${n}px`)}function t(){document.querySelector("#map")&&L.map("map",{center:[51.505,-.09],zoom:13}),document.querySelectorAll(".popup__slider")&&document.querySelectorAll(".popup__slider").forEach((e=>{let t=e.querySelector(".popup__next"),o=e.querySelector(".popup__prev");new Swiper(e,{speed:800,slidesPerView:1,navigation:{nextEl:t,prevEl:o}})})),"undefined"!=typeof Fancybox&&null!==Fancybox&&Fancybox.bind(".leaflet-marker-icon",{dragToClose:!1,closeButton:!1}),document.querySelectorAll(".dropdown").forEach((function(e){const t=e.querySelector(".dropdown__button"),o=e.querySelector(".dropdown__list"),n=o.querySelectorAll(".dropdown__list-item"),i=e.querySelector(".dropdown__input");t.addEventListener("click",(function(){o.classList.toggle("visible"),this.classList.toggle("active")})),n.forEach((function(e){e.addEventListener("click",(function(e){if(e.target.querySelector(".dropdown__checkbox")||e.target.closest(".dropdown__checkbox"))return void e.stopPropagation();n.forEach((function(e){e.classList.remove("active")})),e.target.classList.add("active"),t.innerHTML=this.innerHTML,t.classList.add("selected"),t.classList.remove("active"),i.value=this.dataset.value,o.classList.remove("visible");let r=new Event("input");document.dispatchEvent(r)}))})),document.addEventListener("keydown",(function(e){"Tab"!==e.key&&"Escape"!==e.key||(t.classList.remove("active"),o.classList.remove("visible"))}))}))}barba.init({preventRunning:!0,prefetchIgnore:!0,transitions:[{name:"base",async leave(t){window.innerWidth<767&&barba.go(t.trigger.href),await function(t){let o=t.trigger.closest(".navigation__item");return o||(o=document.querySelector(".navigation__item")),document.querySelector(".navigation").classList.add("pending"),gsap.to(o,{width:"100%",duration:.5,ease:"power2.in"}).then((()=>{!function(t){document.querySelectorAll(".navigation__item").forEach((e=>{e.classList.remove("active")})),t&&t.classList.add("active"),e()}(t.trigger.closest(".navigation__item"))}))}(t),t.current.container.remove()},async enter(e){await function(){let e=document.querySelector(".navigation__item.active");return e||(e=document.querySelector(".navigation__item")),gsap.to(e,{width:"auto",duration:.5,ease:"power2.out"}).then((()=>{document.querySelector(".navigation").classList.remove("pending")}))}(e.next.container)},async afterEnter(){document.querySelectorAll("video").forEach((e=>{var t=e.play();void 0!==t&&t.then((e=>{})).catch((e=>{}))})),t()}}]}),e(),t(),window.addEventListener("resize",(()=>{e()})),document.addEventListener("click",(e=>{e.target.closest(".icon-menu")&&(document.querySelector(".navigation").classList.toggle("open"),function(e){const t=document.body;let o,n="lock";t.classList.contains(n)?(o=parseInt(document.body.dataset.position,10),t.dataset.position=o,t.style.top=-o+"px"):(o=window.scrollY,t.style.top="auto",window.scroll({top:o,left:0}),document.body.removeAttribute("data-position"));let i=t.classList.contains(n)?"0px":window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";t.style.paddingRight=i,t.classList.toggle(n)}(),document.querySelector(".icon-menu").classList.toggle("active"))})),document.addEventListener("input",(e=>{const t=e.target;(t===document||t.closest(".maps__filters"))&&async function(){if(!document.querySelector(".maps__filters"))return;let e=new FormData(document.querySelector(".maps__filters"));try{let t=await fetch("https://monitoring.dev.ecofactor.pro/api/v1/requests/filter/",{method:"POST",body:e});t.ok&&console.log(t)}catch(e){console.log(e)}}()}))}))})();