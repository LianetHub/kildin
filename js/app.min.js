(()=>{"use strict";const{URL:e,iconImageHref:t}={URL:"/json/test.json",iconImageHref:"/img/icons/location.svg"};function n(e,t,n,l){void 0===t&&(t=400),void 0===l&&(l=!1),e.style.overflow="hidden",l&&(e.style.display="block");var o,i=window.getComputedStyle(e),a=parseFloat(i.getPropertyValue("height")),s=parseFloat(i.getPropertyValue("padding-top")),r=parseFloat(i.getPropertyValue("padding-bottom")),c=parseFloat(i.getPropertyValue("margin-top")),d=parseFloat(i.getPropertyValue("margin-bottom")),u=a/t,p=s/t,m=r/t,g=c/t,y=d/t;window.requestAnimationFrame((function i(v){void 0===o&&(o=v);var h=v-o;l?(e.style.height=u*h+"px",e.style.paddingTop=p*h+"px",e.style.paddingBottom=m*h+"px",e.style.marginTop=g*h+"px",e.style.marginBottom=y*h+"px"):(e.style.height=a-u*h+"px",e.style.paddingTop=s-p*h+"px",e.style.paddingBottom=r-m*h+"px",e.style.marginTop=c-g*h+"px",e.style.marginBottom=d-y*h+"px"),h>=t?(e.style.height="",e.style.paddingTop="",e.style.paddingBottom="",e.style.marginTop="",e.style.marginBottom="",e.style.overflow="",l||(e.style.display="none"),"function"==typeof n&&n()):window.requestAnimationFrame(i)}))}document.addEventListener("DOMContentLoaded",(()=>{function n(){const e=document.querySelectorAll(".navigation__item"),t=document.querySelector(".navigation__item:not(.active):not(:first-child)").getBoundingClientRect().width;let n=e.length*t,l=0;e.forEach(((o,i)=>{let a=i+1;o.classList.contains("active")&&(n=(e.length-a)*t,l=a*t)})),document.body.style.setProperty("--padding-wrapper-right",`${n}px`),document.body.style.setProperty("--padding-wrapper-left",`${l}px`)}function l(){i(),function(){const e=document.querySelectorAll("[data-spollers]");if(e.length>0){const t=Array.from(e).filter((function(e,t,n){return!e.dataset.spollers.split(",")[0]}));t.length>0&&l(t);const n=Array.from(e).filter((function(e,t,n){return e.dataset.spollers.split(",")[0]}));if(n.length>0){const e=[];n.forEach((t=>{const n={},l=t.dataset.spollers.split(",");n.value=l[0],n.type=l[1]?l[1].trim():"max",n.item=t,e.push(n)}));let t=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));t=t.filter((function(e,t,n){return n.indexOf(e)===t})),t.forEach((t=>{const n=t.split(","),o=n[1],i=n[2],a=window.matchMedia(n[0]),s=e.filter((function(e){if(e.value===o&&e.type===i)return!0}));a.addListener((function(){l(s,a)})),l(s,a)}))}function l(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),o(e),e.addEventListener("click",i)):(e.classList.remove("_init"),o(e,!1),e.removeEventListener("click",i))}))}function o(e,t=!0){const n=e.querySelectorAll("[data-spoller]");n.length>0&&n.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)}))}function i(e){const t=e.target;if(t.hasAttribute("data-spoller")||t.closest("[data-spoller]")){const n=t.hasAttribute("data-spoller")?t:t.closest("[data-spoller]"),l=n.closest("[data-spollers]"),o=!!l.hasAttribute("data-one-spoller");l.querySelectorAll("._slide").length||(o&&!n.classList.contains("_active")&&a(l),n.classList.toggle("_active"),n.nextElementSibling.slideToggle(300)),e.preventDefault()}}function a(e){const t=e.querySelector("[data-spoller]._active");t&&(t.classList.remove("_active"),t.nextElementSibling.slideUp(300))}}}(),document.querySelectorAll("select[multiple]").forEach((e=>{var t=e.querySelectorAll("option"),n=document.createElement("div");n.classList.add("selectMultiple");var l=document.createElement("div");l.classList.add("active");var o=document.createElement("ul"),i=e.dataset.placeholder,a=document.createElement("span");a.innerText=i,l.appendChild(a),t.forEach((e=>{let t=e.innerText;if(e.selected){let n=document.createElement("a");n.dataset.value=e.value,n.innerHTML="<em>"+t+"</em><i></i>",l.appendChild(n),a.classList.add("hide")}else{let n=document.createElement("li");n.dataset.value=e.value,n.innerHTML=t,o.appendChild(n)}}));var s=document.createElement("div");s.classList.add("arrow"),l.appendChild(s),n.appendChild(l),n.appendChild(o),e.parentElement.append(n),a.appendChild(e)})),document.querySelectorAll(".selectMultiple ul").forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.closest("li");if(!t)return;let n=t.closest(".selectMultiple");if(!n.classList.contains("clicked")){n.classList.add("clicked"),t.previousElementSibling&&t.previousElementSibling.classList.add("beforeRemove"),t.nextElementSibling&&t.nextElementSibling.classList.add("afterRemove"),t.classList.add("remove");let e=document.createElement("a");e.dataset.value=t.dataset.value,e.innerHTML="<em>"+t.innerText+"</em><i></i>",e.classList.add("notShown"),n.querySelector("div").appendChild(e),n.querySelector("select").querySelector('option[value="'+t.dataset.value+'"]').setAttribute("selected","selected"),setTimeout((()=>{e.classList.add("shown"),n.querySelector("span").classList.add("hide")}),300),setTimeout((()=>{let e=window.getComputedStyle(t),l=e.height,o=e.padding;t.animate([{height:l,padding:o},{height:"0px",padding:"0px"}],{duration:300,easing:"ease-in-out"}).onfinish=()=>{t.previousElementSibling&&t.previousElementSibling.classList.remove("beforeRemove"),t.nextElementSibling&&t.nextElementSibling.classList.remove("afterRemove"),t.remove(),n.classList.remove("clicked")}}),300)}}))})),document.querySelectorAll(".selectMultiple > div").forEach((e=>{e.addEventListener("click",(e=>{let t=e.target.closest("a"),n=e.target.closest(".selectMultiple");if(!t)return;t.className="",t.classList.add("remove"),console.log("work 2"),n.classList.add("open");let l=n.querySelector("select");l.querySelector('option[value="'+t.dataset.value+'"]').removeAttribute("selected"),t.classList.add("disappear"),setTimeout((()=>{let e=window.getComputedStyle(t),o=e.padding,i=e.width,a=e.height,s=t.animate([{width:i,height:a,padding:o},{width:"0px",height:"0px",padding:"0px"}],{duration:0,easing:"ease-in-out"}),r=document.createElement("li");r.dataset.value=t.dataset.value,r.innerText=t.querySelector("em").innerText,r.classList.add("show"),n.querySelector("ul").appendChild(r),setTimeout((()=>{l.selectedOptions.length||n.querySelector("span").classList.remove("hide"),r.className=""}),350),s.onfinish=()=>{t.remove()}}),300)}))})),document.querySelectorAll(".selectMultiple > div .arrow, .selectMultiple > div span").forEach((e=>{e.addEventListener("click",(t=>{document.querySelectorAll(".selectMultiple.open").forEach((e=>{e!==t.target.closest(".selectMultiple")&&e.classList.remove("open")})),e.closest(".selectMultiple").classList.toggle("open")}))})),document.querySelectorAll(".popup__slider")&&document.querySelectorAll(".popup__slider").forEach((e=>{let t=e.querySelector(".popup__next"),n=e.querySelector(".popup__prev");new Swiper(e,{speed:800,slidesPerView:1,navigation:{nextEl:t,prevEl:n}})})),document.querySelectorAll(".article__slider")&&document.querySelectorAll(".article__slider").forEach((e=>{let t=e.querySelector(".article__slider-prev"),n=e.querySelector(".article__slider-next");new Swiper(e,{slidesPerView:1,navigation:{nextEl:n,prevEl:t}})})),"undefined"!=typeof Fancybox&&null!==Fancybox&&(Fancybox.bind("[data-fancybox]"),Fancybox.defaults.closeButton=!1,Fancybox.defaults.dragToClose=!1)}function o(){if(document.querySelector("#map")){var e=new ymaps.Map("map",{center:[69.34898894941716,34.18545550000002],zoom:12,controls:[]});document.querySelectorAll(".maps__placemark")&&(document.querySelectorAll(".maps__placemark").forEach((n=>{let l=n.dataset.coords.split(","),o=n.dataset.modal;var i=new ymaps.Placemark(l,{},{iconLayout:"default#image",iconImageHref:t,modalId:o});e.geoObjects.add(i)})),e.geoObjects.events.add("click",(function(e){var t=e.get("target").options._options.modalId;Fancybox.show([{src:t}])})))}}async function i(){if(!document.querySelector(".maps__filters"))return;let t=new FormData(document.querySelector(".maps__filters")),n={};t.forEach((function(e,t){n.hasOwnProperty(t)?(n[t]=Array.from(n[t]),n[t].push(e)):n[t]=e}));let l=JSON.stringify(n);try{let t=await fetch(e,{method:"POST",body:l});t.ok&&(!function(e){let t=document.querySelector(".maps__placemarks"),n=document.querySelector(".maps__modals");t.innerHTML="",n.innerHTML="";let{requests:l}=e;l.forEach((e=>{let{id:l,coordinates:o,req_popup:i}=e;n.innerHTML+=i;let a=document.createElement("div");a.classList.add("maps__placemark"),a.setAttribute("data-coords",o),a.setAttribute("data-modal",`#modal-${l}`),t.appendChild(a)}))}(await t.json()),ymaps.ready(o))}catch(e){console.log(e)}}barba.init({preventRunning:!0,prefetchIgnore:!0,transitions:[{name:"base",async leave(e){window.innerWidth<767&&barba.go(e.trigger.href),await function(e){let t=e.trigger.closest(".navigation__item");return t||(t=document.querySelector(".navigation__item")),document.querySelector(".navigation").classList.add("pending"),gsap.to(t,{width:"100%",duration:.5,ease:"power2.in"}).then((()=>{!function(e){document.querySelectorAll(".navigation__item").forEach((e=>{e.classList.remove("active")})),e&&e.classList.add("active"),n()}(e.trigger.closest(".navigation__item"))}))}(e),e.current.container.remove()},async enter(e){await function(){let e=document.querySelector(".navigation__item.active");return e||(e=document.querySelector(".navigation__item")),gsap.to(e,{width:"auto",duration:.5,ease:"power2.out"}).then((()=>{document.querySelector(".navigation").classList.remove("pending")}))}(e.next.container)},async afterEnter(){document.querySelectorAll("video").forEach((e=>{var t=e.play();void 0!==t&&t.then((e=>{})).catch((e=>{}))})),l()}}]}),n(),l(),window.addEventListener("resize",(()=>{n()})),document.addEventListener("click",(e=>{const t=e.target;t.closest(".icon-menu")&&(document.querySelector(".navigation").classList.toggle("open"),function(e){const t=document.body;let n,l="lock";t.classList.contains(l)?(n=parseInt(document.body.dataset.position,10),t.dataset.position=n,t.style.top=-n+"px"):(n=window.scrollY,t.style.top="auto",window.scroll({top:n,left:0}),document.body.removeAttribute("data-position"));let o=t.classList.contains(l)?"0px":window.innerWidth-document.querySelector(".wrapper").offsetWidth+"px";t.style.paddingRight=o,t.classList.toggle(l)}(),document.querySelector(".icon-menu").classList.toggle("active")),t.classList.contains("maps__btn")&&(e.preventDefault(),i())}))})),HTMLElement.prototype.slideToggle=function(e,t){0===this.clientHeight?n(this,e,t,!0):n(this,e,t)},HTMLElement.prototype.slideUp=function(e,t){n(this,e,t)},HTMLElement.prototype.slideDown=function(e,t){n(this,e,t,!0)}})();